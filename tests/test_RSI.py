from exchanges.gdax import CandleList
from Strategies import RSI

# Time, Low, High, Open, Close, Volume
test_input = [[1514764800, 225, 227.98, 227.18, 226.2, 2146.597926890001], 
              [1514765700, 223.18, 225.94, 225.94, 224.51, 1731.3826289500005], 
              [1514766600, 223.33, 225.34, 224.5, 224.25, 1183.6441438499999], 
              [1514767500, 223.17, 225.21, 224.24, 223.86, 1725.7515062799991], 
              [1514768400, 222.34, 224.49, 223.71, 222.4, 1408.105845859999], 
              [1514769300, 222.38, 223.89, 222.4, 223.32, 2350.3959640400003], 
              [1514770200, 220, 223.33, 223.33, 220, 2401.4318011600008], 
              [1514771100, 217.66, 220.01, 220, 218.3, 3248.8890611900015], 
              [1514772000, 218, 220.7, 218, 220.69, 2221.17999213], 
              [1514772900, 218.51, 220.7, 220.69, 218.72, 1919.743389329999], 
              [1514773800, 218, 218.85, 218.71, 218.85, 1570.0582422599996], 
              [1514774700, 218.85, 220.98, 218.85, 219.18, 1273.239872649999], 
              [1514775600, 219.17, 221.1, 219.17, 221.1, 1387.0172615699994], 
              [1514776500, 221.09, 223, 221.09, 222.99, 2069.4196435700014], 
              [1514777400, 221.5, 223.51, 223, 222.14, 1271.8401750599999], 
              [1514778300, 220.35, 222.5, 222.13, 221.09, 1401.9549110199998], 
              [1514779200, 220.1, 222.01, 221.09, 221, 853.6573286899999], 
              [1514780100, 220.99, 225, 221, 225, 1724.5195501199998], 
              [1514781000, 224.07, 225, 225, 224.76, 981.2409791199999], 
              [1514781900, 224.01, 225.59, 224.75, 225.59, 1503.0952253800003], 
              [1514782800, 223.67, 226.99, 225.6, 223.68, 1758.2038861200006], 
              [1514783700, 222.51, 224.92, 223.67, 224, 1204.2934695400004], 
              [1514784600, 223.66, 224.83, 224, 224.77, 620.2281478699996], 
              [1514785500, 224.36, 224.77, 224.76, 224.36, 766.30519488], 
              [1514786400, 224, 228.72, 224.37, 228.72, 1346.6303277200007], 
              [1514787300, 227.22, 229.98, 228.69, 229.97, 1258.0223326400007], 
              [1514788200, 229.38, 231, 229.98, 229.62, 1393.06231857], 
              [1514789100, 229.62, 232.29, 229.62, 231.7, 1807.4421110799992],
              [1514790000, 229.16, 231.93, 231.7, 230.3, 1089.276233719999], 
              [1514790900, 227.98, 230.3, 230.3, 228.33, 844.5188090500001]]

expected_rsi = [
    41.06957425,
    39.18527551,
    36.97590795,
    36.78263027,
    49.43367554,
    48.80261789,
    51.15299116,
    45.95937526,
    46.95622705,
    49.30601223,
    48.11362911,
    59.56561346,
    62.20877563,
    61.00099766,
    65.20443743,
    60.47937036,
    54.49510067
    ]

expected_times = [x[0] for x in test_input[13:]]

expected_output = [list(x) for x in zip(expected_times, expected_rsi)]

test_candles = CandleList(test_input, 900)

my_rsi = RSI.RSI(test_candles, 14)
my_vals = my_rsi.get_calculated_rsi_vals()

print "TIME \t\t\t VALS: \n"
for row in my_vals:
    print row

rnd_my_vals = [[x[0], round(x[1], 8)] for x in my_vals]

if rnd_my_vals == expected_output:
    print "\nSUCCESS!!! CORRECT OUTPUT!!!"
else:
    print "\nOOPS!!!!!! YOU SUX!"